basePath: /api/v1
definitions:
  models.CreateProjectRequest:
    properties:
      description:
        maxLength: 1000
        type: string
      execution_endpoint:
        type: string
      name:
        maxLength: 255
        minLength: 1
        type: string
    required:
    - name
    type: object
  models.CreateTaskGroupRequest:
    properties:
      description:
        maxLength: 1000
        type: string
      end_time:
        description: 'Format: "HH:MM"'
        type: string
      name:
        maxLength: 255
        minLength: 1
        type: string
      project_id:
        type: string
      start_time:
        description: 'Format: "HH:MM"'
        type: string
      status:
        allOf:
        - $ref: '#/definitions/models.TaskGroupStatus'
        enum:
        - ACTIVE
        - PAUSED
        - DISABLED
      timezone:
        type: string
    required:
    - name
    - project_id
    type: object
  models.CreateTaskRequest:
    properties:
      description:
        maxLength: 1000
        type: string
      metadata:
        additionalProperties: true
        type: object
      name:
        maxLength: 255
        minLength: 1
        type: string
      project_id:
        type: string
      schedule_config:
        $ref: '#/definitions/models.ScheduleConfig'
      schedule_type:
        allOf:
        - $ref: '#/definitions/models.ScheduleType'
        enum:
        - RECURRING
        - ONEOFF
      status:
        allOf:
        - $ref: '#/definitions/models.TaskStatus'
        enum:
        - ACTIVE
        - PAUSED
        - DISABLED
      task_group_id:
        description: Optional task group ID
        type: string
    required:
    - name
    - project_id
    - schedule_config
    - schedule_type
    type: object
  models.ErrorResponse:
    properties:
      details:
        example:
        - project_id is required
        items:
          type: string
        type: array
      error:
        example: Invalid request
        type: string
    type: object
  models.Frequency:
    properties:
      unit:
        allOf:
        - $ref: '#/definitions/models.FrequencyUnit'
        description: 'Unit: "s" (seconds), "m" (minutes), "h" (hours)'
        enum:
        - s
        - m
        - h
      value:
        description: Numeric value (e.g., 15)
        minimum: 1
        type: integer
    required:
    - unit
    - value
    type: object
  models.FrequencyUnit:
    enum:
    - s
    - m
    - h
    type: string
    x-enum-varnames:
    - FrequencyUnitSecond
    - FrequencyUnitMinute
    - FrequencyUnitHour
  models.HTTPTriggerConfig:
    properties:
      body: {}
      headers:
        additionalProperties:
          type: string
        type: object
      method:
        type: string
      timeout:
        maximum: 300
        minimum: 1
        type: integer
      url:
        type: string
    required:
    - method
    - url
    type: object
  models.Project:
    description: Project represents a project entity that contains tasks
    properties:
      api_key:
        example: sk_live_abc123...
        type: string
      created_at:
        example: "2025-01-15T10:00:00Z"
        type: string
      description:
        example: Project description
        type: string
      execution_endpoint:
        example: https://api.example.com/execute
        type: string
      id:
        example: 507f1f77bcf86cd799439011
        type: string
      name:
        example: My Project
        type: string
      updated_at:
        example: "2025-01-15T10:00:00Z"
        type: string
      uuid:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
    type: object
  models.ScheduleConfig:
    properties:
      cron_expression:
        description: If provided, TimeRange and DaysOfWeek are ignored
        type: string
      days_of_week:
        description: Used only if CronExpression is not provided
        items:
          type: integer
        type: array
      exclusions:
        items:
          type: integer
        type: array
      time_range:
        allOf:
        - $ref: '#/definitions/models.TimeRange'
        description: Used only if CronExpression is not provided
      timezone:
        type: string
    required:
    - timezone
    type: object
  models.ScheduleType:
    enum:
    - RECURRING
    - ONEOFF
    type: string
    x-enum-varnames:
    - ScheduleTypeRecurring
    - ScheduleTypeOneOff
  models.Task:
    description: Task represents a scheduled task entity
    properties:
      created_at:
        example: "2025-01-15T10:00:00Z"
        type: string
      description:
        example: Backup database daily
        type: string
      id:
        example: 507f1f77bcf86cd799439011
        type: string
      metadata:
        additionalProperties: true
        type: object
      name:
        example: Daily Backup
        type: string
      project_id:
        example: 507f1f77bcf86cd799439011
        type: string
      schedule_config:
        $ref: '#/definitions/models.ScheduleConfig'
      schedule_type:
        allOf:
        - $ref: '#/definitions/models.ScheduleType'
        enum:
        - RECURRING
        - ONEOFF
        example: RECURRING
      status:
        allOf:
        - $ref: '#/definitions/models.TaskStatus'
        enum:
        - ACTIVE
        - PAUSED
        - DISABLED
        example: ACTIVE
      task_group_id:
        description: Optional reference to task group
        example: 507f1f77bcf86cd799439011
        type: string
      trigger_config:
        allOf:
        - $ref: '#/definitions/models.TriggerConfig'
        description: 'Deprecated: Tasks now use project''s execution_endpoint'
      updated_at:
        example: "2025-01-15T10:00:00Z"
        type: string
      uuid:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
    type: object
  models.TaskGroup:
    description: TaskGroup represents a group of tasks that can be controlled together
    properties:
      created_at:
        example: "2025-01-15T10:00:00Z"
        type: string
      description:
        example: Tasks that run in the morning
        type: string
      end_time:
        description: 'Format: "HH:MM"'
        example: "17:00"
        type: string
      id:
        example: 507f1f77bcf86cd799439011
        type: string
      name:
        example: Morning Tasks
        type: string
      project_id:
        example: 507f1f77bcf86cd799439011
        type: string
      start_time:
        description: 'Format: "HH:MM"'
        example: "09:00"
        type: string
      status:
        allOf:
        - $ref: '#/definitions/models.TaskGroupStatus'
        enum:
        - ACTIVE
        - PAUSED
        - DISABLED
        example: ACTIVE
      timezone:
        description: IANA timezone (e.g., "America/New_York")
        example: America/New_York
        type: string
      updated_at:
        example: "2025-01-15T10:00:00Z"
        type: string
      uuid:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
    type: object
  models.TaskGroupStatus:
    enum:
    - ACTIVE
    - PAUSED
    - DISABLED
    type: string
    x-enum-varnames:
    - TaskGroupStatusActive
    - TaskGroupStatusPaused
    - TaskGroupStatusDisabled
  models.TaskStatus:
    enum:
    - ACTIVE
    - PAUSED
    - DISABLED
    type: string
    x-enum-varnames:
    - TaskStatusActive
    - TaskStatusPaused
    - TaskStatusDisabled
  models.TimeRange:
    properties:
      end:
        description: 'Format: "HH:MM"'
        type: string
      frequency:
        allOf:
        - $ref: '#/definitions/models.Frequency'
        description: 'Frequency with value and unit (e.g., {value: 15, unit: "m"})'
      start:
        description: 'Format: "HH:MM"'
        type: string
    required:
    - end
    - frequency
    - start
    type: object
  models.TriggerConfig:
    properties:
      http:
        $ref: '#/definitions/models.HTTPTriggerConfig'
      type:
        allOf:
        - $ref: '#/definitions/models.TriggerType'
        enum:
        - HTTP
    type: object
  models.TriggerType:
    enum:
    - HTTP
    type: string
    x-enum-varnames:
    - TriggerTypeHTTP
  models.UpdateTaskGroupRequest:
    properties:
      description:
        maxLength: 1000
        type: string
      end_time:
        description: 'Format: "HH:MM"'
        type: string
      name:
        maxLength: 255
        minLength: 1
        type: string
      start_time:
        description: 'Format: "HH:MM"'
        type: string
      status:
        allOf:
        - $ref: '#/definitions/models.TaskGroupStatus'
        enum:
        - ACTIVE
        - PAUSED
        - DISABLED
      timezone:
        type: string
    required:
    - name
    type: object
  models.UpdateTaskRequest:
    properties:
      description:
        maxLength: 1000
        type: string
      metadata:
        additionalProperties: true
        type: object
      name:
        maxLength: 255
        minLength: 1
        type: string
      schedule_config:
        $ref: '#/definitions/models.ScheduleConfig'
      schedule_type:
        allOf:
        - $ref: '#/definitions/models.ScheduleType'
        enum:
        - RECURRING
        - ONEOFF
      status:
        allOf:
        - $ref: '#/definitions/models.TaskStatus'
        enum:
        - ACTIVE
        - PAUSED
        - DISABLED
      task_group_id:
        description: Optional task group ID
        type: string
    required:
    - name
    - schedule_config
    - schedule_type
    type: object
host: localhost:8080
info:
  contact: {}
  description: API for managing scheduled tasks and task groups
  title: Cron Observer API
  version: "1.0"
paths:
  /projects:
    get:
      consumes:
      - application/json
      description: Retrieve a list of all projects
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/models.Project'
            type: array
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Get all projects
      tags:
      - projects
    post:
      consumes:
      - application/json
      description: Create a new project with auto-generated UUID and API key
      parameters:
      - description: Project creation request
        in: body
        name: project
        required: true
        schema:
          $ref: '#/definitions/models.CreateProjectRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/models.Project'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Create a new project
      tags:
      - projects
  /projects/{project_id}/task-groups:
    get:
      consumes:
      - application/json
      description: Retrieve all task groups belonging to a project
      parameters:
      - description: Project ID
        in: path
        name: project_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/models.TaskGroup'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Get task groups by project
      tags:
      - task-groups
    post:
      consumes:
      - application/json
      description: Create a new task group in a project
      parameters:
      - description: Project ID
        in: path
        name: project_id
        required: true
        type: string
      - description: Task group creation request
        in: body
        name: task_group
        required: true
        schema:
          $ref: '#/definitions/models.CreateTaskGroupRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/models.TaskGroup'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Create a new task group
      tags:
      - task-groups
  /projects/{project_id}/task-groups/{group_uuid}:
    delete:
      consumes:
      - application/json
      description: Delete an existing task group
      parameters:
      - description: Project ID
        in: path
        name: project_id
        required: true
        type: string
      - description: Task Group UUID
        in: path
        name: group_uuid
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Delete a task group
      tags:
      - task-groups
    get:
      consumes:
      - application/json
      description: Retrieve a task group by its UUID
      parameters:
      - description: Project ID
        in: path
        name: project_id
        required: true
        type: string
      - description: Task Group UUID
        in: path
        name: group_uuid
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.TaskGroup'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Get a task group
      tags:
      - task-groups
    put:
      consumes:
      - application/json
      description: Update an existing task group
      parameters:
      - description: Project ID
        in: path
        name: project_id
        required: true
        type: string
      - description: Task Group UUID
        in: path
        name: group_uuid
        required: true
        type: string
      - description: Task group update request
        in: body
        name: task_group
        required: true
        schema:
          $ref: '#/definitions/models.UpdateTaskGroupRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.TaskGroup'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Update a task group
      tags:
      - task-groups
  /projects/{project_id}/task-groups/{group_uuid}/start:
    post:
      consumes:
      - application/json
      description: Manually start all tasks in a task group
      parameters:
      - description: Project ID
        in: path
        name: project_id
        required: true
        type: string
      - description: Task Group UUID
        in: path
        name: group_uuid
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Start a task group
      tags:
      - task-groups
  /projects/{project_id}/task-groups/{group_uuid}/stop:
    post:
      consumes:
      - application/json
      description: Manually stop all tasks in a task group
      parameters:
      - description: Project ID
        in: path
        name: project_id
        required: true
        type: string
      - description: Task Group UUID
        in: path
        name: group_uuid
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Stop a task group
      tags:
      - task-groups
  /projects/{project_id}/task-groups/{group_uuid}/tasks:
    get:
      consumes:
      - application/json
      description: Retrieve all tasks belonging to a task group
      parameters:
      - description: Project ID
        in: path
        name: project_id
        required: true
        type: string
      - description: Task Group UUID
        in: path
        name: group_uuid
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/models.Task'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Get tasks in a group
      tags:
      - task-groups
  /projects/{project_id}/tasks:
    get:
      consumes:
      - application/json
      description: Retrieve all tasks belonging to a project
      parameters:
      - description: Project ID
        in: path
        name: project_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/models.Task'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Get tasks by project
      tags:
      - tasks
    post:
      consumes:
      - application/json
      description: Create a new scheduled task in a project
      parameters:
      - description: Project ID
        in: path
        name: project_id
        required: true
        type: string
      - description: Task creation request
        in: body
        name: task
        required: true
        schema:
          $ref: '#/definitions/models.CreateTaskRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/models.Task'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Create a new task
      tags:
      - tasks
  /projects/{project_id}/tasks/{task_uuid}:
    delete:
      consumes:
      - application/json
      description: Delete an existing scheduled task
      parameters:
      - description: Project ID
        in: path
        name: project_id
        required: true
        type: string
      - description: Task UUID
        in: path
        name: task_uuid
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Delete a task
      tags:
      - tasks
    put:
      consumes:
      - application/json
      description: Update an existing scheduled task
      parameters:
      - description: Project ID
        in: path
        name: project_id
        required: true
        type: string
      - description: Task UUID
        in: path
        name: task_uuid
        required: true
        type: string
      - description: Task update request
        in: body
        name: task
        required: true
        schema:
          $ref: '#/definitions/models.UpdateTaskRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Task'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
      summary: Update a task
      tags:
      - tasks
swagger: "2.0"
